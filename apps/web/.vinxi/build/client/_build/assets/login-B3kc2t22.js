import{u as T,a as q,b as l,g as d,d as i,i as r,c,m as O,t as u}from"./web-NkDPZjLK.js";import{I as y,B as J,C as W}from"./Select-BoKHGZz3.js";import{u as Y}from"./routing-DDllppYb.js";const z={"owner@mehaal.tech":{id:"1",email:"owner@mehaal.tech",name:"Admin User",role:"owner",permissions:["*"]},"manager@mehaal.tech":{id:"2",email:"manager@mehaal.tech",name:"Manager User",role:"management",permissions:["read:projects","write:projects","read:team","write:team"]},"client@mehaal.tech":{id:"3",email:"client@mehaal.tech",name:"Client User",role:"client",permissions:["read:services","read:billing","write:support"]}};async function F(e){await G(1e3);const t=z[e.email];if(!t)throw new Error("Invalid credentials");const s={token:H(),expiresAt:Date.now()+1440*60*1e3,user:t};return localStorage.setItem("auth_session",JSON.stringify(s)),console.log("[Auth] User logged in:",t.email),s}function G(e){return new Promise(t=>setTimeout(t,e))}function H(){return`mock_token_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}const K=q();function Q(){const e=T(K);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}var V=u('<form class=space-y-4><!$><!/><!$><!/><!$><!/><!$><!/><div class="text-center text-sm text-gray-400"><p>Demo accounts:</p><p class=mt-1>owner@mehaal.tech (Owner)</p><p>manager@mehaal.tech (Management)</p><p>client@mehaal.tech (Client)</p><p class="mt-2 text-xs">Password: any'),X=u(`<div class="min-h-screen flex items-center justify-center bg-black p-4"><div class="w-full max-w-md"><div class="text-center mb-8"><img src=/icon.svg alt=Logo class="h-16 w-auto mx-auto mb-4"><h1 class="text-3xl font-bold text-white mb-2">Welcome Back</h1><p class=text-gray-400>Sign in to continue to Mehaal.Tech AI</p></div><!$><!/><div class="mt-6 text-center"><a href=/auth/register class="text-sm text-brand-primary hover:underline">Don't have an account? Sign up`),Z=u('<div class="p-3 bg-red-500/10 border border-red-500/20 rounded-lg text-red-500 text-sm">');function ne(){const e=Y(),{setSession:t}=Q(),[s,C]=l(""),[g,k]=l(""),[m,h]=l(""),[A,p]=l(!1),x=async o=>{o.preventDefault(),h(""),p(!0);try{const a=await F({email:s(),password:g()});t(a),e({owner:"/dashboard/owner",management:"/dashboard/management",client:"/dashboard/client",franchise:"/dashboard/franchise",partner:"/dashboard/partner"}[a.user.role]||"/")}catch(a){h(a.message||"Login failed")}finally{p(!1)}};return(()=>{var o=d(X),a=o.firstChild,b=a.firstChild,E=b.nextSibling,[w,I]=i(E.nextSibling);return w.nextSibling,r(a,c(W,{get children(){var n=d(V),M=n.firstChild,[$,D]=i(M.nextSibling),L=$.nextSibling,[f,P]=i(L.nextSibling),U=f.nextSibling,[_,N]=i(U.nextSibling),j=_.nextSibling,[v,B]=i(j.nextSibling);return v.nextSibling,n.addEventListener("submit",x),r(n,c(y,{type:"email",label:"Email",placeholder:"you@example.com",get value(){return s()},onInput:C,required:!0,get error(){return m()?" ":void 0}}),$,D),r(n,c(y,{type:"password",label:"Password",placeholder:"••••••••",get value(){return g()},onInput:k,required:!0}),f,P),r(n,(()=>{var R=O(()=>!!m());return()=>R()&&(()=>{var S=d(Z);return r(S,m),S})()})(),_,N),r(n,c(J,{variant:"primary",class:"w-full",get loading(){return A()},onClick:x,children:"Sign In"}),v,B),n}}),w,I),o})()}export{ne as default};
