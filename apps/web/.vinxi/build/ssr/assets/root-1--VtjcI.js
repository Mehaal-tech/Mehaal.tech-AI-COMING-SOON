import{createComponent as m,isServer as O,getRequestEvent as U,delegateEvents as B,ssr as A,ssrHydrationKey as x,escape as I}from"solid-js/web";import{children as q,createMemo as S,getOwner as D,untrack as K,Show as F,on as N,createRoot as _,createSignal as W,onCleanup as T,sharedConfig as L,ErrorBoundary as $,Suspense as H}from"solid-js";import{F as M}from"./ssr-3SGXmd-q.js";import{c as V,b as J,R as z,g as G,d as Q,e as C,f as X,m as Y,h as Z,k as tt,s as et,n as nt}from"./routing-0hP7Sh6N.js";import"solid-js/web/storage";import"h3";import"node:async_hooks";const j=t=>n=>{const{base:r}=n,a=q(()=>n.children),e=S(()=>V(a(),n.base||""));let i;const c=J(t,e,()=>i,{base:r,singleFlight:n.singleFlight,transformUrl:n.transformUrl});return t.create&&t.create(c),m(z.Provider,{value:c,get children(){return m(rt,{routerState:c,get root(){return n.root},get preload(){return n.rootPreload||n.rootLoad},get children(){return[(i=D())&&null,m(at,{routerState:c,get branches(){return e()}})]}})}})};function rt(t){const n=t.routerState.location,r=t.routerState.params,a=S(()=>t.preload&&K(()=>{t.preload({params:r,location:n,intent:G()||"initial"})}));return m(F,{get when(){return t.root},keyed:!0,get fallback(){return t.children},children:e=>m(e,{params:r,location:n,get data(){return a()},get children(){return t.children}})})}function at(t){if(O){const e=U();if(e&&e.router&&e.router.dataOnly){ot(e,t.routerState,t.branches);return}e&&((e.router||(e.router={})).matches||(e.router.matches=t.routerState.matches().map(({route:i,path:c,params:f})=>({path:i.originalPath,pattern:i.pattern,match:c,params:f,info:i.info}))))}const n=[];let r;const a=S(N(t.routerState.matches,(e,i,c)=>{let f=i&&e.length===i.length;const h=[];for(let l=0,w=e.length;l<w;l++){const b=i&&i[l],g=e[l];c&&b&&g.route.key===b.route.key?h[l]=c[l]:(f=!1,n[l]&&n[l](),_(y=>{n[l]=y,h[l]=Q(t.routerState,h[l-1]||t.routerState.base,P(()=>a()[l+1]),()=>{const p=t.routerState.matches();return p[l]??p[0]})}))}return n.splice(e.length).forEach(l=>l()),c&&f?c:(r=h[0],h)}));return P(()=>a()&&r)()}const P=t=>()=>m(F,{get when(){return t()},keyed:!0,children:n=>m(X.Provider,{value:n,get children(){return n.outlet()}})});function ot(t,n,r){const a=new URL(t.request.url),e=C(r,new URL(t.router.previousUrl||t.request.url).pathname),i=C(r,a.pathname);for(let c=0;c<i.length;c++){(!e[c]||i[c].route!==e[c].route)&&(t.router.dataOnly=!0);const{route:f,params:h}=i[c];f.preload&&f.preload({params:h,location:n.location,intent:"preload"})}}function st([t,n],r,a){return[t,a?e=>n(a(e)):n]}function it(t){let n=!1;const r=e=>typeof e=="string"?{value:e}:e,a=st(W(r(t.get()),{equals:(e,i)=>e.value===i.value&&e.state===i.state}),void 0,e=>(!n&&t.set(e),L.registry&&!L.done&&(L.done=!0),e));return t.init&&T(t.init((e=t.get())=>{n=!0,a[1](r(e)),n=!1})),j({signal:a,create:t.create,utils:t.utils})}function ct(t,n,r){return t.addEventListener(n,r),()=>t.removeEventListener(n,r)}function ut(t,n){const r=t&&document.getElementById(t);r?r.scrollIntoView():n&&window.scrollTo(0,0)}function lt(t){const n=new URL(t);return n.pathname+n.search}function dt(t){let n;const r={value:t.url||(n=U())&&lt(n.request.url)||""};return j({signal:[()=>r,a=>Object.assign(r,a)]})(t)}const ht=new Map;function mt(t=!0,n=!1,r="/_server",a){return e=>{const i=e.base.path(),c=e.navigatorFactory(e.base);let f,h;function l(o){return o.namespaceURI==="http://www.w3.org/2000/svg"}function w(o){if(o.defaultPrevented||o.button!==0||o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)return;const s=o.composedPath().find(E=>E instanceof Node&&E.nodeName.toUpperCase()==="A");if(!s||n&&!s.hasAttribute("link"))return;const d=l(s),u=d?s.href.baseVal:s.href;if((d?s.target.baseVal:s.target)||!u&&!s.hasAttribute("state"))return;const v=(s.getAttribute("rel")||"").split(/\s+/);if(s.hasAttribute("download")||v&&v.includes("external"))return;const R=d?new URL(u,document.baseURI):new URL(u);if(!(R.origin!==window.location.origin||i&&R.pathname&&!R.pathname.toLowerCase().startsWith(i.toLowerCase())))return[s,R]}function b(o){const s=w(o);if(!s)return;const[d,u]=s,k=e.parsePath(u.pathname+u.search+u.hash),v=d.getAttribute("state");o.preventDefault(),c(k,{resolve:!1,replace:d.hasAttribute("replace"),scroll:!d.hasAttribute("noscroll"),state:v?JSON.parse(v):void 0})}function g(o){const s=w(o);if(!s)return;const[d,u]=s;a&&(u.pathname=a(u.pathname)),e.preloadRoute(u,d.getAttribute("preload")!=="false")}function y(o){clearTimeout(f);const s=w(o);if(!s)return h=null;const[d,u]=s;h!==d&&(a&&(u.pathname=a(u.pathname)),f=setTimeout(()=>{e.preloadRoute(u,d.getAttribute("preload")!=="false"),h=d},20))}function p(o){if(o.defaultPrevented)return;let s=o.submitter&&o.submitter.hasAttribute("formaction")?o.submitter.getAttribute("formaction"):o.target.getAttribute("action");if(!s)return;if(!s.startsWith("https://action/")){const u=new URL(s,Y);if(s=e.parsePath(u.pathname+u.search),!s.startsWith(r))return}if(o.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const d=ht.get(s);if(d){o.preventDefault();const u=new FormData(o.target,o.submitter);d.call({r:e,f:o.target},o.target.enctype==="multipart/form-data"?u:new URLSearchParams(u))}}B(["click","submit"]),document.addEventListener("click",b),t&&(document.addEventListener("mousemove",y,{passive:!0}),document.addEventListener("focusin",g,{passive:!0}),document.addEventListener("touchstart",g,{passive:!0})),document.addEventListener("submit",p),T(()=>{document.removeEventListener("click",b),t&&(document.removeEventListener("mousemove",y),document.removeEventListener("focusin",g),document.removeEventListener("touchstart",g)),document.removeEventListener("submit",p)})}}function ft(t){if(O)return dt(t);const n=()=>{const a=window.location.pathname.replace(/^\/+/,"/")+window.location.search,e=window.history.state&&window.history.state._depth&&Object.keys(window.history.state).length===1?void 0:window.history.state;return{value:a+window.location.hash,state:e}},r=Z();return it({get:n,set({value:a,replace:e,scroll:i,state:c}){e?window.history.replaceState(tt(c),"",a):window.history.pushState(c,"",a),ut(decodeURIComponent(window.location.hash.slice(1)),i),et()},init:a=>ct(window,"popstate",nt(a,e=>{if(e)return!r.confirm(e);{const i=n();return!r.confirm(i.value,{state:i.state})}})),create:mt(t.preload,t.explicitLinks,t.actionBase,t.transformUrl),utils:{go:a=>window.history.go(a),beforeLeave:r}})(t)}var gt=["<div",' class="min-h-screen flex items-center justify-center bg-black text-white"><div class="text-center max-w-md p-8"><h1 class="text-3xl font-bold mb-4">⚠️ Something went wrong</h1><p class="text-gray-400 mb-6">','</p><button class="px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors">Try Again</button></div></div>'],wt=["<div",' class="min-h-screen flex items-center justify-center bg-black"><div class="text-white text-xl">Loading...</div></div>'];function kt(){return m(ft,{root:t=>m($,{fallback:(n,r)=>A(gt,x(),I(n.toString())),get children(){return m(H,{get fallback(){return A(wt,x())},get children(){return t.children}})}}),get children(){return m(M,{})}})}export{kt as default};
