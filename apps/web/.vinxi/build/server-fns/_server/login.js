import{ssr as l,ssrHydrationKey as c,escape as a,createComponent as s}from"solid-js/web";import{B as x}from"./assets/Button-rjMnZ3ec.js";import{I as h}from"./assets/Input-0sOzVmib.js";import{C as b}from"./assets/Card-D9smAXyI.js";import{useContext as y,createContext as S,createSignal as o}from"solid-js";import{u as $}from"./assets/routing-wKbSS_gE.js";const C={"owner@mehaal.tech":{id:"1",email:"owner@mehaal.tech",name:"Admin User",role:"owner",permissions:["*"]},"manager@mehaal.tech":{id:"2",email:"manager@mehaal.tech",name:"Manager User",role:"management",permissions:["read:projects","write:projects","read:team","write:team"]},"client@mehaal.tech":{id:"3",email:"client@mehaal.tech",name:"Client User",role:"client",permissions:["read:services","read:billing","write:support"]}};async function k(e){await A(1e3);const t=C[e.email];if(!t)throw new Error("Invalid credentials");const r={token:I(),expiresAt:Date.now()+1440*60*1e3,user:t};return localStorage.setItem("auth_session",JSON.stringify(r)),console.log("[Auth] User logged in:",t.email),r}function A(e){return new Promise(t=>setTimeout(t,e))}function I(){return`mock_token_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}const _=S();function M(){const e=y(_);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}var D=["<form",' class="space-y-4"><!--$-->',"<!--/--><!--$-->","<!--/--><!--$-->","<!--/--><!--$-->",'<!--/--><div class="text-center text-sm text-gray-400"><p>Demo accounts:</p><p class="mt-1">owner@mehaal.tech (Owner)</p><p>manager@mehaal.tech (Management)</p><p>client@mehaal.tech (Client)</p><p class="mt-2 text-xs">Password: any</p></div></form>'],E=["<div",' class="min-h-screen flex items-center justify-center bg-black p-4"><div class="w-full max-w-md"><div class="text-center mb-8"><img src="/icon.svg" alt="Logo" class="h-16 w-auto mx-auto mb-4"><h1 class="text-3xl font-bold text-white mb-2">Welcome Back</h1><p class="text-gray-400">Sign in to continue to Mehaal.Tech AI</p></div><!--$-->',`<!--/--><div class="mt-6 text-center"><a href="/auth/register" class="text-sm text-brand-primary hover:underline">Don't have an account? Sign up</a></div></div></div>`],P=["<div",' class="p-3 bg-red-500/10 border border-red-500/20 rounded-lg text-red-500 text-sm">',"</div>"];function N(){const e=$(),{setSession:t}=M(),[r,p]=o(""),[m,g]=o(""),[i,d]=o(""),[w,u]=o(!1),f=async v=>{v.preventDefault(),d(""),u(!0);try{const n=await k({email:r(),password:m()});t(n),e({owner:"/dashboard/owner",management:"/dashboard/management",client:"/dashboard/client",franchise:"/dashboard/franchise",partner:"/dashboard/partner"}[n.user.role]||"/")}catch(n){d(n.message||"Login failed")}finally{u(!1)}};return l(E,c(),a(s(b,{get children(){return l(D,c(),a(s(h,{type:"email",label:"Email",placeholder:"you@example.com",get value(){return r()},onInput:p,required:!0,get error(){return i()?" ":void 0}})),a(s(h,{type:"password",label:"Password",placeholder:"••••••••",get value(){return m()},onInput:g,required:!0})),i()&&l(P,c(),a(i())),a(s(x,{variant:"primary",class:"w-full",get loading(){return w()},onClick:f,children:"Sign In"})))}})))}export{N as default};
